<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Daily WOD — Simple, 20–60 min</title>
<style>
  :root{ --bg:#0f1115; --card:#151922; --ink:#e8eaf0; --muted:#aab0c0; --accent:#61dafb; --code:#1c2230; }
  *{box-sizing:border-box}
  body{margin:0;padding:24px;background:var(--bg);color:var(--ink);font:16px/1.45 system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif}
  h1,h2,h3{margin:0 0 8px;line-height:1.15}
  h1{font-size:28px} h2{font-size:20px;color:var(--muted);font-weight:600} h3{font-size:16px;color:var(--muted);font-weight:600}
  .wrap{max-width:900px;margin:0 auto;display:grid;gap:16px}
  .card{background:var(--card);border:1px solid #222937;border-radius:12px;padding:16px;box-shadow:0 4px 18px rgba(0,0,0,.25)}
  .row{display:flex;gap:12px;flex-wrap:wrap;align-items:center;justify-content:center}
  button{background:#111723;color:var(--ink);border:1px solid #2a3345;border-radius:8px;padding:10px 12px;cursor:pointer;font:inherit}
  button:hover{border-color:var(--accent)}
  .pill{display:inline-block;padding:4px 10px;border-radius:999px;border:1px solid #2a3345;background:#0d1320;color:var(--muted);font-size:12px;margin-right:6px}
  .meta{color:var(--muted);font-size:14px}
  ul{margin:8px 0 0 20px} li{margin:4px 0}
  .notice{background:#1a2030;border-left:4px solid var(--accent);padding:10px 12px;border-radius:8px}
  .center{text-align:center}
  @media print{ .controls, .footer {display:none} body{background:white;color:#111} .card{box-shadow:none;border-color:#ddd}}
</style>
</head>
<body>
<div class="wrap">
  <div class="card">
    <h1 class="center">Daily WOD</h1>
    <div id="todayStr" class="meta center"></div>
    <div class="row controls" style="margin-top:8px;">
      <button id="prevBtn">◀ Prev</button>
      <button id="todayBtn">Today</button>
      <button id="nextBtn">Next ▶</button>
    </div>
  </div>

  <div class="card">
    <div class="row" style="justify-content:space-between">
      <h2 id="wodTitle">Workout</h2>
      <div>
        <span class="pill" id="typePill"></span>
        <span class="pill" id="timePill"></span>
        <span class="pill" id="targetPill"></span>
      </div>
    </div>
    <div id="wodBody"></div>
    <div class="meta" id="wodNotes" style="margin-top:8px;"></div>
  </div>

  <div class="card">
    <h3>Warm-Up</h3>
    <div id="warmup"></div>
  </div>

  <div class="card">
    <h3>Cooldown</h3>
    <div id="cooldown"></div>
  </div>

  <div class="footer center meta">Gear: DB (2×50 lb), KB (53 & 35 single bells), rower, running, box 20/24/32, pull-up bar, rope.</div>
</div>

<script>
/* ---------- Helpers ---------- */
function mulberry32(a){return function(){let t=a+=0x6D2B79F5;t=Math.imul(t^(t>>>15),t|1);t^=t+Math.imul(t^(t>>>7),t|61);return((t^(t>>>14))>>>0)/4294967296}}
function choice(rng,arr){return arr[Math.floor(rng()*arr.length)]}
function shuffle(rng,arr){const a=arr.slice();for(let i=a.length-1;i>0;i--){const j=Math.floor(rng()*(i+1));[a[i],a[j]]=[a[j],a[i]]}return a}
function dayOfYear(d){const start=new Date(Date.UTC(d.getFullYear(),0,1));const diff=Date.UTC(d.getFullYear(),d.getMonth(),d.getDate())-start;return Math.floor(diff/(24*60*60*1000))+1}
function fmtDate(d){return d.toLocaleDateString(undefined,{weekday:'long',year:'numeric',month:'long',day:'numeric'})}

/* ---------- Loads tied to YOUR kit ---------- */
const DB2H = "2×50 lb";  // your dumbbells
const DB1H = "1×50 lb";  // single DB variant
const KB53 = "53 lb";
const KB35 = "35 lb";
const BOX  = '24"';

/* ---------- One warm-up / one cooldown ---------- */
const ONE_WARMUP = [
  "8–10 min easy build: row or jog (progress each 2 min).",
  `Then 2 rounds (quality): 8 KB swings (${KB35}), 6 lunges/leg, 15s active hang/kip swings, 8 push-ups.`
].join("<br>");
const ONE_COOLDOWN = [
  "3–5 min easy walk/row to drop HR.",
  "2× :45 couch stretch / side.",
  "2× :30–:45 banded lat or passive hang.",
  "Ankle rocks x10/side."
].join("<br>");

/* ---------- Named WODs (adapted to your exact kit) ---------- */
const BENCH = [
  {title:"Cindy", type:"AMRAP", time:"20",
   body:["As many rounds as possible in 20 min:","• 5 Pull-ups","• 10 Push-ups","• 15 Air Squats"], notes:"Classic engine."},
  {title:"Chelsea", type:"EMOM", time:"30",
   body:["Every minute for 30 min:","• 5 Pull-ups, 10 Push-ups, 15 Air Squats"], notes:"If you blow up, drop to 4/8/12 and keep the minute."},
  {title:"Barbara (Half)", type:"For Time", time:"25–40",
   body:["5 rounds:","• 20 Pull-ups","• 30 Push-ups","• 40 Sit-ups","• 50 Air Squats","Rest 1 min between rounds"], notes:"Still grim."},
  {title:"Kelly (Home)", type:"For Time", time:"25–40",
   body:["5 rounds:","• 400m Run",`• 30 Box Jumps — ${BOX}`,`• 30 Goblet Thrusters — ${DB1H}`], notes:"Wall balls → single-DB goblet thrusters."},
  {title:"Eva (Scaled)", type:"For Time", time:"35–55",
   body:["5 rounds:","• 800m Run",`• 30 KB Swings — ${KB53}`,"• 30 Pull-ups"], notes:"Drop to 3 rds if needed."},
  {title:"Filthy Fifty (Home)", type:"For Time", time:"25–40",
   body:["50 each:",
     `• Box Jumps — ${BOX}`,"• Jumping Pull-ups or Ring Rows",`• KB Swings — ${KB35}`,
     "• Walking Lunges (50 steps)","• V-ups",`• DB Push Press — ${DB1H} (switch arms)`,
     "• Supermans",`• Goblet Thrusters — ${DB1H}`,"• Burpees","• 150 Single-unders"], notes:"All single-bell/DB friendly."},
  {title:"Chad (Scaled)", type:"For Time", time:"40–60",
   body:["• 1,000 Box Step-ups — 20\" (partition)"], notes:"Ruck optional."},
  {title:"The Seven (DB)", type:"For Time", time:"30–50",
   body:["7 rounds:",
     "• 7 Pike Push-ups",`• 7 Thrusters — ${DB2H}`,"• 7 V-ups",`• 7 Deadlifts — ${DB2H}`,
     "• 7 Burpees",`• 7 KB Swings — ${KB53}`,"• 7 Pull-ups"], notes:"Hero grinder."},
  {title:"Glen (Home)", type:"For Time", time:"45–60",
   body:["• 1 mile Run","• 100 Pull-ups","• 200 Push-ups","• 300 Sit-ups","• 1 mile Run"], notes:"Partition calisthenics. Cap 60."},
  {title:"Helen+", type:"For Time", time:"20–30",
   body:["5 rounds:","• 400m Run",`• 21 KB Swings — ${KB53}`,"• 12 Pull-ups"], notes:"Helen but 5 rounds."},
  {title:"Nicole", type:"AMRAP", time:"20",
   body:["AMRAP 20:","• 400m Run","• Max Pull-ups"], notes:"Count total pull-ups."},
  {title:"Open 17.1 / 21.2 (DB)", type:"For Time", time:"20–30",
   body:["10-20-30-40-50 reps:",`• Alt DB Snatches — ${DB1H}`,`• Burpee Box Jump-Overs — ${BOX}`], notes:"Keep moving; step up is fine."},
  {title:"Open 20.2 (Home)", type:"AMRAP", time:"20",
   body:["AMRAP 20:",`• 4 DB Thrusters — ${DB2H}`,"• 6 Toes-to-Bar → 10 V-ups","• 24 Double-unders (or 48 singles)"], notes:"Small sets, quick cycle."},
  {title:"Open 22.2 (Home)", type:"For Time", time:"20–30",
   body:["1-2-3-…-10-…-3-2-1:",`• Deadlifts — ${DB2H}`,"• Burpees"], notes:"Back neutral, steady cadence."},
  {title:"12 Days of Christmas (Home)", type:"For Time", time:"30–50",
   body:["Perform like the song (1→12, then 12→1):",
     "1 Burpee",`2 KB Swings — ${KB53}`,`3 Goblet Thrusters — ${DB1H}`,"4 Pull-ups",`5 Box Jumps — ${BOX}`,
     "6 Sit-ups","7 Push-ups",`8 Alt DB Snatches — ${DB1H}`,"9 Lunges / leg","10 Double-unders (or 30 singles)",
     `11 KB Goblet Squats — ${KB53}`,"12 Cal Row (or 200m run)"], notes:"Pace early."}
];

/* ---------- Generators (20–60 min only, using YOUR kit) ---------- */
const MONO = ["Run 400m","Run 600m","Run 800m","Run 1000m","Row 500m","Row 750m","Row 1000m","Row 1500m","150 Single-unders","100 Double-unders"];
const GYM  = ["15 Pull-ups","20 Push-ups","25 Sit-ups","20 Air Squats","15 Burpees","12 Pike Push-ups","20 V-ups"];
const DBB  = [
  `16 DB Thrusters — ${DB2H}`,`14 DB Push Press — ${DB2H}`,`16 DB Front Squats — ${DB2H}`,
  `14 DB Power Cleans — ${DB2H}`,`20 DB Deadlifts — ${DB2H}`,`20 Goblet Squats — ${DB1H}`,`16 Alt DB Snatches — ${DB1H}`
];
const KBB  = [
  `25 KB Swings — ${KB53}`,`20 KB Goblet Squats — ${KB53}`,`14 KB Clean & Press (alt) — ${KB53}`,`20 KB Swings — ${KB35}`
];
const BOXM = [`20 Box Jumps — ${BOX}`,`14 Burpee Box Jump-Overs — ${BOX}`];

function amrapLong(rng){
  const mins = choice(rng,[20,24,30,40]);
  const mono = choice(rng,MONO);
  const gym  = choice(rng,GYM);
  const load = choice(rng, DBB.concat(KBB).concat(BOXM));
  return {title:`AMRAP ${mins} — Triplet`, type:"AMRAP", time:String(mins),
    body:[`As many rounds as possible in ${mins} minutes:`,`• ${mono}`,`• ${load}`,`• ${gym}`],
    notes:"~2–3 min/round; steady work."
  };
}

function emomLong(rng){
  const mins = choice(rng,[24,30,36,40]);
  const s1 = choice(rng, DBB.concat(KBB));
  const s2 = choice(rng, GYM.concat(BOXM));
  const s3 = choice(rng, MONO);
  return {title:`EMOM ${mins} — Rotate 3`, type:"EMOM", time:String(mins),
    body:[`Every minute for ${mins} min, rotate:`,`1) ${s1}`,`2) ${s2}`,`3) ${s3}`,"Finish each minute in ~40–45s."],
    notes:"Hold windows; quality first."
  };
}

/* Long chipper: 8–12 movements, intended 30–60 min */
function chipperLong(rng){
  const pool = MONO.concat(DBB).concat(KBB).concat(GYM).concat(BOXM);
  const count = choice(rng,[8,9,10,11,12]);
  const seq = [];
  const used = new Set();
  [choice(rng,MONO), choice(rng,DBB.concat(KBB)), choice(rng,GYM), choice(rng,BOXM)]
    .forEach(m=>{seq.push(m); used.add(m)});
  while(seq.length<count){
    const pick = choice(rng,pool);
    if(!used.has(pick)){ seq.push(pick); used.add(pick); }
  }
  return { title:"Chipper — For Time (Long)", type:"For Time", time:"30–60",
           body: seq.map((x,i)=> (i===0?"Complete for time:":"• ")+x),
           notes:"Break small and keep moving. Target 30–60 min." };
}

/* ---------- Schedule (1 chipper per week) ---------- */
/* Weekly pattern: Mon AMRAP, Tue EMOM, Wed AMRAP, Thu EMOM, Fri AMRAP, Sat EMOM, Sun CHIPPER */
function memorialDayUTC(y){const last=new Date(Date.UTC(y,4,31));const dow=last.getUTCDay();const offset=(dow+6)%7;return 31-offset}
function namedSchedule(year){
  const slots=new Map();
  // Drop a benchmark every 9 days
  let idx=0; for(let d=9; d<=365; d+=9){ slots.set(d, idx++ % BENCH.length); }
  // Pins
  const md = memorialDayUTC(year);
  const mdoy = Math.floor((Date.UTC(year,4,md)-Date.UTC(year,0,0))/(24*3600*1000));
  slots.set(mdoy, BENCH.findIndex(b=>b.title==="Glen (Home)"));
  const xmas = Math.floor((Date.UTC(year,11,25)-Date.UTC(year,0,0))/(24*3600*1000));
  slots.set(xmas, BENCH.findIndex(b=>b.title.startsWith("12 Days")));
  return slots;
}

function buildYear(){
  const out=new Array(365);
  const rng=mulberry32(1337); // fixed schedule for stability
  const slots=namedSchedule(new Date().getFullYear());
  for(let d=1; d<=365; d++){
    if(slots.has(d)){
      const b=BENCH[slots.get(d)];
      out[d-1]={title:b.title,type:b.type,time:b.time,body:b.body.slice(),notes:b.notes,named:true};
    }else{
      const dow=(d-1)%7; // 0..6
      if(dow===6){ out[d-1]=chipperLong(rng); }           // one chipper per week
      else if(dow%2===0){ out[d-1]=amrapLong(rng); }      // AMRAP on 0,2,4
      else { out[d-1]=emomLong(rng); }                    // EMOM on 1,3,5
    }
  }
  return out;
}
const YEAR = buildYear();

/* ---------- UI ---------- */
const elTitle=document.getElementById("wodTitle");
const elBody=document.getElementById("wodBody");
const elNotes=document.getElementById("wodNotes");
const elType=document.getElementById("typePill");
const elTime=document.getElementById("timePill");
const elTarget=document.getElementById("targetPill");
let currentDay = ((dayOfYear(new Date())-1)%365)+1; // leap-year safe

function paceHint(w){ return (w.type==="For Time")?"Target: 30–60 min":`Target: ${w.time} min`; }

function renderDay(day){
  const w = YEAR[day-1];
  elTitle.textContent = w.named? `${w.title} (Benchmark)` : w.title;
  elType.textContent = w.type;
  elTime.textContent = w.time;
  elTarget.textContent = paceHint(w);
  elBody.innerHTML = "<ul>"+w.body.map(l=>`<li>${l}</li>`).join("")+"</ul>";
  elNotes.textContent = w.notes || "";
  currentDay = day;
}

function init(){
  document.getElementById("todayStr").textContent = fmtDate(new Date());
  document.getElementById("warmup").innerHTML = `<div class="notice">${ONE_WARMUP}</div>`;
  document.getElementById("cooldown").innerHTML = `<div class="notice">${ONE_COOLDOWN}</div>`;
  renderDay(currentDay);

  document.getElementById("prevBtn").onclick=()=>{renderDay(currentDay<=1?365:currentDay-1);};
  document.getElementById("nextBtn").onclick=()=>{renderDay(currentDay>=365?1:currentDay+1);};
  document.getElementById("todayBtn").onclick=()=>{renderDay(((dayOfYear(new Date())-1)%365)+1);};
}
document.addEventListener("DOMContentLoaded", init);
</script>
</body>
</html>